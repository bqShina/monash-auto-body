"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var n,t,o,r=require("react"),i=e(r),a=require("styled-components"),l=e(a);function s(){return(s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function c(e,n){return(c=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function u(e,n){return n||(n=e.slice(0)),e.raw=n,e}function d(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return 0===n.length?function(e){return e}:1===n.length?n[0]:n.reduce((function(e,n){return function(){return e(n.apply(void 0,arguments))}}))}(n=exports.EditorMode||(exports.EditorMode={})).AnnotateWithText="AnnotateWithText",n.AnnotateOnly="AnnotateOnly",n.ReadOnlyWithSelection="ReadOnlyWithSelection",n.ReadOnly="ReadOnly",(t=exports.SelectionMode||(exports.SelectionMode={})).New="NEW",t.Selecting="SELECTING",t.Editing="EDITING",t.Final="FINAL",(o=exports.AllowedShape||(exports.AllowedShape={})).Oval="Oval",o.Point="Point",o.Rectangle="Rectangle";var p,h,g,x,v=function(e){var n=e.currentTarget.getBoundingClientRect();return{x:(e.clientX-n.x)/n.width*100,y:(e.clientY-n.y)/n.height*100}},f=function(e,n,t){return Math.max(e,Math.min(n,t))},m=function(e){return w(e)?F(e)?(C(e)&&e.preventDefault(),function(e){var n=e.targetTouches[0],t=e.currentTarget.getBoundingClientRect(),o=n.pageY-(t.top+window.scrollY);return{x:f(0,100,(n.pageX-t.left)/t.width*100),y:f(0,100,o/t.height*100)}}(e)):void 0:v(e)},w=function(e){return void 0!==e.targetTouches},F=function(e){return 1===e.targetTouches.length},C=function(e){return"touchmove"===e.type},y=l.div(p||(p=u(["\n  padding: 8px 16px;\n\n  textarea {\n    border: 0;\n    font-size: 14px;\n    margin: 6px 0;\n    min-height: 60px;\n    outline: 0;\n  }\n"]))),E=l.div(h||(h=u(["\n  background: whitesmoke;\n  border: 0;\n  box-sizing: border-box;\n  color: #363636;\n  cursor: pointer;\n  font-size: 1rem;\n  margin: 0;\n  outline: 0;\n  padding: 8px 16px;\n  text-align: center;\n  text-shadow: 0 1px 0 rgba(0, 0, 0, 0.1);\n  width: 100%;\n\n  transition: background 0.21s ease-in-out;\n\n  &:focus,\n  &:hover {\n    background: #eeeeee;\n  }\n"])));function b(e){return i.createElement(i.Fragment,null,i.createElement(y,null,i.createElement("textarea",{placeholder:"Write description",onFocus:e.onFocus,onBlur:e.onBlur,onChange:e.onChange,value:e.value})),e.value&&i.createElement(E,{onClick:e.onSubmit},"Submit"))}var M=a.keyframes(g||(g=u(["\n  from {\n    opacity: 0;\n    transform: scale(0);\n  }\n\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n"]))),S=l.div(x||(x=u(["\n  background: white;\n  border-radius: 2px;\n  box-shadow: 0 1px 5px 0 rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14),\n    0 3px 1px -2px rgba(0, 0, 0, 0.12);\n  margin-top: 16px;\n  transform-origin: top left;\n\n  animation: "," 0.31s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n  overflow: hidden;\n  z-index: 2;\n"])),M);function A(e){var n=e.annotation.geometry,t=r.useState(""),o=t[0],a=t[1];return n?i.createElement(S,{className:e.className,style:s({position:"absolute",left:n.x+"%",top:n.y+n.height+"%"},e.style)},i.createElement(b,{onChange:function(e){return a(e.target.value)},onSubmit:function(){e.onSubmit(s({},e.annotation,{data:s({},e.annotation.data,{text:o})}))},value:o})):null}function D(e,n,t,o){if(!(null==e?void 0:e.selection)){var r=m(n);return{geometry:{x:0,y:0,type:o,width:0,height:0},selection:{mode:exports.SelectionMode.New,anchorX:r.x,anchorY:r.y},data:{id:t.idFunction()}}}}function T(e,n,t){if(null!=e&&e.selection){if(!e.geometry||e.selection.mode===exports.SelectionMode.New)return;switch(e.selection.mode){case exports.SelectionMode.Selecting:return s({},e,{selection:s({},e.selection,{mode:t===exports.EditorMode.AnnotateOnly?exports.SelectionMode.Final:exports.SelectionMode.Editing})})}}return e}function k(e,n){var t,o;if((null==e||null==(t=e.selection)?void 0:t.mode)===exports.SelectionMode.New||(null==e||null==(o=e.selection)?void 0:o.mode)===exports.SelectionMode.Selecting){var r=e.selection,i=r.anchorX,a=r.anchorY,l=m(n),c=l.x,u=l.y,d=c-i,p=u-a,h=d>0?i:c,g=p>0?a:u;return s({},e,{selection:s({},null==e?void 0:e.selection,{mode:exports.SelectionMode.Selecting}),geometry:s({},e.geometry,{x:null!=h?h:0,y:null!=g?g:0,width:Math.abs(d),height:Math.abs(p)})})}return e}var O,P,R=function(e){return{onMouseDown:function(n,t,o){return D(n,t,o,e)},onMouseUp:function(e,n,t){return T(e,0,t.editorMode)},onMouseMove:function(e,n){return k(e,n)},onTouchStart:function(n,t,o){return D(n,t,o,e)},onTouchEnd:function(e,n,t){return T(e,0,t.editorMode)},onTouchMove:function(e,n){return k(e,n)}}},L=exports.AllowedShape.Rectangle,V={TYPE:L,intersects:function(e,n){var t=e.x,o=e.y;return!(t<n.x||o<n.y||t>n.x+n.width||o>n.y+n.height)},area:function(e){return e.height*e.width},methods:R(L)},Y=function(e){return{marginX:6/e.width*100,marginY:6/e.height*100}},N=exports.AllowedShape.Point,B={TYPE:N,intersects:function(e,n,t){var o=e.x,r=e.y,i=Y(t),a=i.marginX,l=i.marginY;return!(o<n.x-a||r<n.y-l||o>n.x+a||r>n.y+l)},area:function(e,n){var t=Y(n);return t.marginX*t.marginY},methods:{onClick:function(e,n,t){if(null==e||!e.geometry)return s({},e,{selection:{mode:exports.SelectionMode.Final},geometry:s({},m(n),{width:0,height:0,type:N}),data:{id:t.idFunction()}})}}},H=function(e){return Math.pow(e,2)},I=exports.AllowedShape.Oval,U={TYPE:I,intersects:function(e,n){var t=e.y,o=n.width/2,r=n.height/2,i=n.y+r;return H(e.x-(n.x+o))/H(o)+H(t-i)/H(r)<=1},area:function(e){return Math.PI*(e.width/2)*(e.height/2)},methods:R(I)},G=l.div(O||(O=u(["\n  background: white;\n  border-radius: 2px;\n  box-shadow: 0 1px 5px 0 rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14),\n    0 3px 1px -2px rgba(0, 0, 0, 0.12);\n  padding: 8px 16px;\n  margin-top: 8px;\n  margin-left: 8px;\n  z-index: 2;\n"])));function z(e){var n=e.annotation.geometry;return n?i.createElement(G,{style:s({position:"absolute",left:n.x+"%",top:n.y+n.height+"%"},e.style),className:e.className},e.annotation.data&&e.annotation.data.text):null}var W,j=l.div(P||(P=u(["\n  background: rgba(0, 0, 0, 0.4);\n  border-radius: 5px;\n  bottom: 4px;\n  color: white;\n  font-size: 12px;\n  font-weight: bold;\n  opacity: 0;\n  padding: 10px;\n  pointer-events: none;\n  position: absolute;\n  right: 4px;\n  transition: opacity 0.21s ease-in-out;\n  user-select: none;\n"]))),X=function(e){return function(n){var t=n.annotation,o=n.children,a=n.editorMode,l=n.isInSelectionMode,c=n.renderContent,u=n.selectedAnnotation,d=n.style,p=r.useState(!1),h=p[0],g=p[1],x=a===exports.EditorMode.AnnotateWithText&&h&&c&&n.annotation.data.text&&c?c(n):null,v=r.useCallback((function(){return g(!0)}),[]),f=r.useCallback((function(){return g(!1)}),[]),m=l?s({zIndex:0},d||{}):d;return i.createElement("div",{onClick:function(){n.onAnnotationClick&&n.onAnnotationClick(t)}},i.createElement(e,{annotation:t,children:o,editorMode:a,isMouseOver:h,isSelected:!!u&&t.data.id===u.data.id,onMouseEnter:v,onMouseLeave:f,style:m}),x)}},_=l.div(W||(W=u(["\n  border-radius: 100%;\n  box-shadow: 0 0 2px 2px white inset;\n  box-sizing: border-box;\n  transition: box-shadow 0.21s ease-in-out;\n  z-index: ",";\n  cursor: ",";\n"])),(function(e){return(e.isReadOnly?0:1)+";"}),(function(e){return e.isReadOnly?"auto;":"pointer;"}));function Z(e){var n=e.annotation.geometry,t=e.children,o=e.editorMode===exports.EditorMode.ReadOnly;if(!n)return null;var r=!o&&(e.isMouseOver||e.isSelected);return i.createElement(_,{isReadOnly:o,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:s({position:"absolute",left:n.x+"%",top:n.y+"%",height:n.height+"%",width:n.width+"%",border:r?"solid 1px black":"dashed 2px black",boxShadow:r?"0 0 1px 1px black inset":"",backgroundColor:r?"rgba(128, 128, 128, 0.3)":"rgba(128, 128, 128, 0.05)"},e.style||{})},t||null)}var q,J=i.memo(X(Z)),K=l.div(q||(q=u(["\n  border-radius: 50%;\n  box-sizing: border-box;\n  // prettier-ignore\n  box-shadow: \n          0 0 0 1px rgba(0, 0, 0, 0.3),\n          0 0 0 2px rgba(0, 0, 0, 0.2),\n          0 5px 4px rgba(0, 0, 0, 0.4);\n  height: 16px;\n  position: absolute;\n  transform: translate3d(-50%, -50%, 0);\n  width: 16px;\n  z-index: ",";\n  cursor: ",";\n"])),(function(e){return(e.isReadOnly?0:1)+";"}),(function(e){return e.isReadOnly?"auto;":"pointer;"}));function Q(e){var n=e.annotation.geometry,t=e.children,o=e.editorMode===exports.EditorMode.ReadOnly;return n?i.createElement(K,{isReadOnly:o,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:s({top:n.y+"%",left:n.x+"%",border:o||!e.isMouseOver&&!e.isSelected?"solid 3px white":"solid 3px grey"},e.style||{})},t||null):null}var $,ee=i.memo(X(Q)),ne=l.div($||($=u(["\n  box-shadow: 0 0 2px 2px white inset;\n  box-sizing: border-box;\n  transition: box-shadow 0.21s ease-in-out;\n  z-index: ",";\n  cursor: ",";\n"])),(function(e){return(e.isReadOnly?0:1)+";"}),(function(e){return e.isReadOnly?"auto;":"pointer;"}));function te(e){var n=e.annotation.geometry,t=e.children,o=e.editorMode===exports.EditorMode.ReadOnly;if(!n)return null;var r=!o&&(e.isMouseOver||e.isSelected);return i.createElement(ne,{isReadOnly:o,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:s({position:"absolute",left:n.x+"%",top:n.y+"%",height:n.height+"%",width:n.width+"%",border:r?"solid 1px black":"dashed 2px black",boxShadow:r?"0 0 1px 1px black inset":"",backgroundColor:r?"rgba(128, 128, 128, 0.3)":"rgba(128, 128, 128, 0.05)"},e.style||{})},t||null)}var oe,re=i.memo(X(te)),ie={src:"",annotations:[],editorMode:exports.EditorMode.AnnotateWithText,idFunction:function(){return Math.random().toString()},onAnnotationsUpdate:function(){},onAnnotationClick:function(){},onSelectedAnnotationUpdate:function(){},overlayOptions:{displayOverlay:!0},renderEditor:function(e){return i.createElement(A,{annotation:e.annotation,onSubmit:e.onSubmit})},renderShape:function(e){switch(e.annotation.geometry.type){case V.TYPE:return i.createElement(re,Object.assign({},e));case B.TYPE:return i.createElement(ee,Object.assign({},e));case U.TYPE:return i.createElement(J,Object.assign({},e));default:return null}},renderContent:function(e){return i.createElement(z,{key:e.key,annotation:e.annotation})},renderOverlay:function(e){var n=e.annotations,t=e.selectorType,o=e.overlayText;if(o)return i.createElement(j,null,o);if(0!==n.length)return i.createElement(j,null,"Select the annotation for additional options");switch(t){case B.TYPE:return i.createElement(j,null,"Click to Annotate");default:return i.createElement(j,null,"Click and Drag to Annotate")}},selectors:[V,B,U],allowedShapes:[V.TYPE,U.TYPE,B.TYPE],toolBarOptions:{showDeleteOption:!0,showToolBar:!0,renderSelectedAnnotationIcons:function(){return null},renderToolbarIcons:function(){return null}}},ae=l.img(oe||(oe=u(["\n  display: block;\n  width: 100%;\n"])));function le(e){var n=r.useRef(null);return i.createElement(ae,{alt:e.alt,draggable:e.draggable,ref:n,src:e.src,style:e.style})}var se,ce,ue,de,pe,he,ge,xe,ve,fe,me=l.div(se||(se=u(["\n  border: 1px solid #ccc;\n  background-color: #efefef;\n  width: 100%;\n  display: flex;\n"]))),we=l.a(ce||(ce=u(["\n  border-right: 1px solid #ccc;\n  width: 40px;\n  height: 40px;\n  background-repeat: no-repeat;\n  background-position: center;\n  cursor: pointer;\n  background-color: ",";\n"])),(function(e){return e.isSelected?"#ccc":"#efefef"})),Fe=l(we)(ue||(ue=u(["\n  background-image: url(",");\n"])),"data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20version%3D%221.1%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M12%2C20A8%2C8%200%200%2C1%204%2C12A8%2C8%200%200%2C1%2012%2C4A8%2C8%200%200%2C1%2020%2C12A8%2C8%200%200%2C1%2012%2C20M12%2C2A10%2C10%200%200%2C0%202%2C12A10%2C10%200%200%2C0%2012%2C22A10%2C10%200%200%2C0%2022%2C12A10%2C10%200%200%2C0%2012%2C2Z%22%20%2F%3E%3C%2Fsvg%3E"),Ce=l(we)(de||(de=u(["\n  background-image: url(",");\n"])),"data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20version%3D%221.1%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M12%2C8A4%2C4%200%200%2C0%208%2C12A4%2C4%200%200%2C0%2012%2C16A4%2C4%200%200%2C0%2016%2C12A4%2C4%200%200%2C0%2012%2C8Z%22%20%2F%3E%3C%2Fsvg%3E"),ye=l(we)(pe||(pe=u(["\n  background-image: url(",");\n"])),"data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20version%3D%221.1%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M3%2C3H21V21H3V3M5%2C5V19H19V5H5Z%22%20%2F%3E%3C%2Fsvg%3E"),Ee=l(we)(he||(he=u(["\n  background-image: url(",");\n"])),"data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20version%3D%221.1%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M20%2C11V13H8L13.5%2C18.5L12.08%2C19.92L4.16%2C12L12.08%2C4.08L13.5%2C5.5L8%2C11H20Z%22%20%2F%3E%3C%2Fsvg%3E"),be=l(we)(ge||(ge=u(["\n  background-image: url(",");\n"])),"data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20version%3D%221.1%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M9%2C3V4H4V6H5V19A2%2C2%200%200%2C0%207%2C21H17A2%2C2%200%200%2C0%2019%2C19V6H20V4H15V3H9M7%2C6H17V19H7V6M9%2C8V17H11V8H9M13%2C8V17H15V8H13Z%22%20%2F%3E%3C%2Fsvg%3E");function Me(e){var n=e.allowedShapes,t=e.deleteAnnotation,o=e.options,r=e.selectedAnnotation,a=e.selectedSelectorType,l=e.setSelectedSelectorType,s=e.unSelectSelectedAnnotation;return o.showToolBar?i.createElement(me,null,r?i.createElement(i.Fragment,null,i.createElement(Ee,{isSelected:!1,onClick:function(){return s(r)}}),null==o.renderSelectedAnnotationIcons?void 0:o.renderSelectedAnnotationIcons({annotation:r,unSelectAnnotation:function(){return s(r)}}),i.createElement(be,{isSelected:!1,onClick:function(){return t(r)}})):i.createElement(i.Fragment,null,n.includes(exports.AllowedShape.Rectangle)?i.createElement(ye,{isSelected:a===exports.AllowedShape.Rectangle,onClick:function(){return l(exports.AllowedShape.Rectangle)}}):null,n.includes(exports.AllowedShape.Oval)?i.createElement(Fe,{isSelected:a===exports.AllowedShape.Oval,onClick:function(){return l(exports.AllowedShape.Oval)}}):null,n.includes(exports.AllowedShape.Point)?i.createElement(Ce,{isSelected:a===exports.AllowedShape.Point,onClick:function(){return l(exports.AllowedShape.Point)}}):null)):null}var Se,Ae=l.div(xe||(xe=u(["\n  clear: both;\n  position: relative;\n  width: 100%;\n\n  &:hover "," {\n    opacity: 1;\n  }\n"])),j),De=l.div(ve||(ve=u(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n"]))),Te=l.div(fe||(fe=u(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n"])));function ke(e){var n,t=s({},ie,e),o=t.allowedShapes,a=t.alt,l=t.className,c=t.editorMode,u=t.idFunction,d=t.onSelectedAnnotationUpdate,p=t.onAnnotationClick,h=t.overlayOptions,g=t.renderShape,x=t.renderEditor,v=t.renderOverlay,f=t.style,m=t.src,w=t.toolBarOptions,F=r.useState(t.allowedShapes[0]),C=F[0],y=F[1],E=r.useState(),b=E[0],M=E[1],S=r.useState(),A=S[0],D=S[1],T=r.useState(e.annotations),k=T[0],O=T[1];r.useEffect((function(){O(e.annotations)}),[e.annotations]);var P=r.useState(!1),R=P[0],L=P[1],V=i.createRef(),Y=c!==exports.EditorMode.ReadOnly&&c!==exports.EditorMode.ReadOnlyWithSelection;r.useEffect((function(){Y&&(V.current.ontouchstart=void 0,V.current.ontouchend=void 0,V.current.ontouchmove=void 0,V.current.ontouchcancel=void 0)}));var N=function(n){var t=[].concat(k,[n]);O(t),e.onAnnotationsUpdate(t),D(void 0)},B=function(n,o){var r,i,a=t.editorMode;if(e[n])e[n](o);else{var l=(i=C,t.selectors.find((function(e){return e.TYPE===i}))).methods[n];if(l){var s=l(A,o,{editorMode:a,idFunction:u});switch(D(s),null==s||null==(r=s.selection)?void 0:r.mode){case exports.SelectionMode.Final:N(s),L(!0);break;case exports.SelectionMode.Editing:L(!0);break;default:D(s),L(!0)}}}},H=function(){b&&(M(void 0),d(b,!1))},I=r.useCallback((function(e){M(e),d(e,!0),p(e)}),[p,d]);return function(e,n){r.useEffect((function(){function n(n){"Escape"===n.key&&e()}return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}}),[n,e])}(H,b),i.createElement("div",{className:l},Y&&i.createElement(Me,{allowedShapes:o,deleteAnnotation:function(e){var n=k.filter((function(n){return n.data.id!==e.data.id})),o=[].concat(n);O(o),M(void 0),t.onAnnotationsUpdate(o)},options:w,selectedAnnotation:b,selectedSelectorType:C,setSelectedSelectorType:y,unSelectSelectedAnnotation:H}),i.createElement(Ae,{style:s({},t.style,{touchAction:"auto"}),onMouseLeave:function(n){e.relativeMousePos.onMouseLeave(n)},onTouchCancel:function(n){e.relativeMousePos.onTouchLeave(n)}},i.createElement(le,{style:f,alt:a,src:m,draggable:!1}),i.createElement(De,null,k.map((function(e){return g({annotation:e,editorMode:t.editorMode,isInSelectionMode:!!A,key:e.data.id,renderContent:t.renderContent,onAnnotationClick:I,selectedAnnotation:b})})),(null==A?void 0:A.geometry)&&g({annotation:A,editorMode:t.editorMode,isInSelectionMode:!!A,key:A.data.id,renderContent:t.renderContent,onAnnotationClick:I})),Y?i.createElement(De,{onClick:function(e){H(),B("onClick",e)},onMouseUp:function(e){return B("onMouseUp",e)},onMouseDown:function(e){return B("onMouseDown",e)},onMouseMove:function(n){e.relativeMousePos.onMouseMove(n),function(e){B("onMouseMove",e)}(n)},ref:V}):i.createElement(Te,{onClick:H}),Y&&(null==h?void 0:h.displayOverlay)&&v({annotations:k,overlayText:null==h?void 0:h.overlayText,selectorType:C}),R&&A&&(null==(n=A.selection)?void 0:n.mode)===exports.SelectionMode.Editing&&x({annotation:A,onSubmit:N}),i.createElement("div",null,t.children)))}exports.Annotation=d((void 0===Se&&(Se="relativeMousePos"),function(e){return function(n){var t,o;function r(){var e;return(e=n.apply(this,arguments)||this).state={x:0,y:0},e.innerRef=function(n){e.container=n},e.onMouseMove=function(n){var t=v(n);e.setState(t)},e.onTouchMove=function(n){if(1===n.targetTouches.length){var t,o,r,i,a=n.targetTouches[0],l=a.pageX-(null==(t=e.container)||null==(o=t.offsetParent)?void 0:o.offsetLeft),s=a.pageY-(null==(r=e.container)||null==(i=r.offsetParent)?void 0:i.offsetTop);e.setState({x:l/e.container.width*100,y:s/e.container.height*100})}},e.onMouseLeave=function(n){e.setState({x:null,y:null})},e.onTouchLeave=function(n){e.setState({x:null,y:null})},e}return o=n,(t=r).prototype=Object.create(o.prototype),t.prototype.constructor=t,c(t,o),r.prototype.render=function(){var n,t=((n={})[Se]={innerRef:this.innerRef,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,onTouchMove:this.onTouchMove,onTouchLeave:this.onTouchLeave,x:this.state.x,y:this.state.y},n);return i.createElement(e,Object.assign({},this.props,t))},r}(r.Component)}))(ke),exports.Oval=J,exports.OvalSelector=U,exports.Point=ee,exports.PointSelector=B,exports.Rectangle=re,exports.RectangleSelector=V;
//# sourceMappingURL=react-mark-image.cjs.production.min.js.map
